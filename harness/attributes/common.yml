

attributes.default:

  app:
    # build - static|dynamic
    #   dynamic - volumes are mounted and the build step is run once the containers have started
    #   static  - app is copied into console, built, then the resulting build is copied into the web image
    build: dynamic

    # mode - development|production
    #   development - additional tooling is made available and magento is run in development mode
    #   production  - leaner images with less tooling and magento is run in production mode
    mode: development

    version: latest

    name: =@("workspace.name")

    docker:
      repository: =@("workspace.name")

  docker-sync: yes

  composer:
    auth:
      basic: ~
      github: ~

  magento:
    edition: enterprise
    version: 1.14.4.0
    config:
      session:
        save: redis
        redis:
          hostname: redis-session
          port: 6379
          database: 0
      cache:
        save: redis
        redis:
          hostname: redis
          port: 6379
          database: 1
      fpc:
        save: redis
        redis:
          hostname: redis
          port: 6379
          database: 2

  php:
    version: 7.2
    fpm:
      hostname: php-fpm
    ini:
      memory_limit: 1024M
    ext-xdebug:
      enable: no
      config:
        remote_enable: 1
        remote_autostart: 1
        remote_port: 9000
        remote_host: host.docker.internal

  assets:
    remote: ="s3://"~@("aws.bucket")~"/development"
    local: tools/assets/development

  database:
    host: mysql
    user: magento
    pass: magento
    name: magento
    root_pass: DV6RdNY3QcFsBk7V

  domain: my127.site
  hostname: = @('namespace') ~ '.' ~ @('domain')

  tls:
    key: |
      -----BEGIN PRIVATE KEY-----
      MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDNaqIGV3Eo4GBg
      3HxWYZwH5ohfVQ2ewA4jKbK94AF30V2fZ2qSrelNxAoIIG/dmM4gi645OH7kVJtF
      +PnLS9lvJ1rDNE0Qx7nU88qovisiyqdgtr18xCYl4vlhN5SYJ9NN6Co3JSMAdeOZ
      pY1e/rYgDgeen+sUyOj9C8AGW5Gs45YVRuelMSUcs+cuKRYI0hvMReZt7Lz9ZKzL
      QhChnkA1xjlNkLyvLpADhVKcxF5aqA/0g4ty/PsBjA7gKUm+EJgOv8OyXICKkZpK
      W54XHLOMI4ZFh40fTDRuX8USiRMuvI6E0RhQGKcbXce3gN2KkWlvxO+qRL8JHv4M
      whPLBOPhAgMBAAECggEBAJjXPaVQTK9oe+22QIGZcRpjypZ8V30GU76QGSG0WgNH
      8cxYi3CGHDCzq+8uC24rczu+Eq0avzevSDVBMsO0NR3Cf4L9GFZi9X9gwiraDIh/
      lxib/9Oksum/v2Q5kcPA5jVyiG6toCSIkwfQqabECMlDByJcxPKbJtiZdJCGc5ba
      DZI0FBo5tMjwlk415PWV6LKRGqHlypxbHZBpKqaOAVWAYpq/SK9ZC2bmYI6aHoh/
      VmAgQ0+/uZHlsTpEQpJydkDFSmMAvqfikYLgMewX07xHVRWECHNeU9pPu3pcVocM
      8b62oZcAr5rLgMqtkGaAdUywzpqwpC6Et3aSuleoGy0CgYEA+CABFlPWF22ezTpG
      eHDBYNvvtXfkas5+lhcj6IsI5xeaIznBIONvVUlC9UudsgWt3CpDFDxsj4gLSppG
      fwJhl1iaiQV2yyoo+gal44xlZVTj6GlPvjlkBFcM2hrSGlQe187nv/Eus+LPpjoj
      Z7izHe6XmzeLBXe/fV7OQGeJ8L8CgYEA0++gLVCsmDWLsz67Uxh9GMiAaj4VvK/Q
      +rVdChN7hkep22t1Vad2Etgx+ixPIMgWQiKyz6GwEy8gZNnyHf9wO0R43T83UICG
      u2YXyCM17v+GoUCgauK+EnfJk6gHGgPzf3O+yb5vHDLv8DPu4FWVV/ePtLO+dgBE
      UEjZZfVBs18CgYAERFCgeKqa1oi/kLv7gDzjFIUnwrsL1yc4H4e/jPyHNNGyv2CB
      10dn2Q2suDMrB4v42EU1COD5Cubezo5dysWw25Y0uwJS9hOkUQ7zPcvUlUQiEAWO
      COCebnzLF2D7kOzC200C8PvTnhfiDOfk9bkmz56NzcO3QVrqpgG3+8/UcwKBgQC1
      JLgEY1LR2dpovvJ/SIwLtbvEkwIjPybgUkmOhi5rDC+LAmLMbhCGdNDqohqTy1Dz
      ABNTUkBbdUk7yeieaSi1D4Y6nICbxu7hl5Y2EppTh4W7p7A1C04oHMhm8xP20W+6
      /OQSLTlsocDgzpKanavC/y6N5Z+h3gKFmG5wLdsVAwKBgQDbCuC6jb4f7zT4kz9W
      WZJc7OFU0Hzz4vyCpyat3jt/R+A5Ye+H4kqeyuvH5pKU4Othd3yfBsygNoMTK7se
      6idDAy6F9/S0kZWD2Tvo69ct6zNnpvnBfW6i75v+OE31mmOjR+dlGzoyydjW6LKi
      8d5zAAqEatqHWJix1th8mS5Q0A==
      -----END PRIVATE KEY-----

    crt: |
      -----BEGIN CERTIFICATE-----
      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
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      MIIEkjCCA3qgAwIBAgIQCgFBQgAAAVOFc2oLheynCDANBgkqhkiG9w0BAQsFADA/
      MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT
      DkRTVCBSb290IENBIFgzMB4XDTE2MDMxNzE2NDA0NloXDTIxMDMxNzE2NDA0Nlow
      SjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUxldCdzIEVuY3J5cHQxIzAhBgNVBAMT
      GkxldCdzIEVuY3J5cHQgQXV0aG9yaXR5IFgzMIIBIjANBgkqhkiG9w0BAQEFAAOC
      AQ8AMIIBCgKCAQEAnNMM8FrlLke3cl03g7NoYzDq1zUmGSXhvb418XCSL7e4S0EF
      q6meNQhY7LEqxGiHC6PjdeTm86dicbp5gWAf15Gan/PQeGdxyGkOlZHP/uaZ6WA8
      SMx+yk13EiSdRxta67nsHjcAHJyse6cF6s5K671B5TaYucv9bTyWaN8jKkKQDIZ0
      Z8h/pZq4UmEUEz9l6YKHy9v6Dlb2honzhT+Xhq+w3Brvaw2VFn3EK6BlspkENnWA
      a6xK8xuQSXgvopZPKiAlKQTGdMDQMc2PMTiVFrqoM7hD8bEfwzB/onkxEz0tNvjj
      /PIzark5McWvxI0NHWQWM6r6hCm21AvA2H3DkwIDAQABo4IBfTCCAXkwEgYDVR0T
      AQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwfwYIKwYBBQUHAQEEczBxMDIG
      CCsGAQUFBzABhiZodHRwOi8vaXNyZy50cnVzdGlkLm9jc3AuaWRlbnRydXN0LmNv
      bTA7BggrBgEFBQcwAoYvaHR0cDovL2FwcHMuaWRlbnRydXN0LmNvbS9yb290cy9k
      c3Ryb290Y2F4My5wN2MwHwYDVR0jBBgwFoAUxKexpHsscfrb4UuQdf/EFWCFiRAw
      VAYDVR0gBE0wSzAIBgZngQwBAgEwPwYLKwYBBAGC3xMBAQEwMDAuBggrBgEFBQcC
      ARYiaHR0cDovL2Nwcy5yb290LXgxLmxldHNlbmNyeXB0Lm9yZzA8BgNVHR8ENTAz
      MDGgL6AthitodHRwOi8vY3JsLmlkZW50cnVzdC5jb20vRFNUUk9PVENBWDNDUkwu
      Y3JsMB0GA1UdDgQWBBSoSmpjBH3duubRObemRWXv86jsoTANBgkqhkiG9w0BAQsF
      AAOCAQEA3TPXEfNjWDjdGBX7CVW+dla5cEilaUcne8IkCJLxWh9KEik3JHRRHGJo
      uM2VcGfl96S8TihRzZvoroed6ti6WqEBmtzw3Wodatg+VyOeph4EYpr/1wXKtx8/
      wApIvJSwtmVi4MFU5aMqrSDE6ea73Mj2tcMyo5jMd6jmeWUHK8so/joWUoHOUgwu
      X4Po1QYz+3dszkDqMp4fklxBwXRsW10KXzPMTZ+sOPAveyxindmjkW8lGy+QsRlG
      PfZ+G6Z6h7mjem0Y+iWlkYcV4PIWL1iwBi8saCbGS5jN2p8M+X+Q7UNKEkROb3N6
      KOqkqm57TH2H3eDJAkSnh6/DNFu0Qg==
      -----END CERTIFICATE-----
